<h2>Applicants</h2>
<div id="list"></div>

<script>
const company = JSON.parse(localStorage.getItem("company"));

fetch(`https://virtual-intership-portal.onrender.com/api/applications/company/${company._id}`)
  .then(res => res.json())
  .then(data => {
    const list = document.getElementById("list");

    data.forEach(app => {
      const div = document.createElement("div");
      div.innerHTML = `
        <h3>${app.studentId.name}</h3>
        <p>Email: ${app.studentId.email}</p>
        <p>Skills: ${(app.studentId.skills || []).join(", ")}</p>
        <p>Internship: ${app.internshipId.title}</p>
        <p>Status: ${app.status}</p>
        <button onclick="updateStatus('${app._id}', 'accepted')">Accept</button>
        <button onclick="updateStatus('${app._id}', 'rejected')">Reject</button>
        <hr/>
      `;
      list.appendChild(div);
    });
  });

function updateStatus(id, status) {
  fetch(`https://virtual-intership-portal.onrender.com/api/applications/${id}/status`, {
    method: "PUT",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ status }),
  })
  .then(res => res.json())
  .then(data => alert(data.message));
}
</script>
